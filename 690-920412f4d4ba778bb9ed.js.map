{"version":3,"file":"690-920412f4d4ba778bb9ed.js","mappings":"wKA6DA,UAxDcA,IACZ,MAAM,GAAEC,EAAE,KAAEC,GAASF,GACdG,EAAWC,IAAgBC,EAAAA,EAAAA,MAC5BC,GAAeC,EAAAA,EAAAA,MAEfC,EAAWN,EAAQ,QAAOD,KAAMC,IAAU,QAAOD,IACjDQ,EAAaC,EAAAA,OAAa,MAuChC,OAFAA,EAAAA,WA9B4BC,KAC1B,MAAMC,EAASH,EAAWI,QAE1B,IAAIC,EAAMF,EAAOG,SACbH,EAAOI,gBAAiBF,EAAMF,EAAOI,gBAChCJ,EAAOK,gBAAeH,EAAMF,EAAOK,cAAcF,UAC1D,MAAMG,EAAYhB,EAAQ,QAAOD,KAAMC,IAAU,QAAOD,IAGlDkB,EAAc,uCAZZ,2BAA0BlB,OADlBC,EAAQ,SAAQA,IAAS,mBAcnCkB,EAAaC,EAAAA,EAAMC,gBAAgBhB,EAAc,wBAajDiB,EAAc,sHAA+EJ,IAN7E,mEACcD,8DAPA,SAAdf,EAAuB,GAAM,sJAGfiB,6FAWpCN,EAAIU,OACJV,EAAIW,QAAQF,GACZT,EAAIY,OAAO,GAGwB,CAACvB,IAGpCO,EAAAA,cAAA,UACEiB,MAAOnB,EACPoB,IAAKnB,EACLoB,MAAM,OACNC,YAAa,EACb7B,GAAIO,GACJ,C","sources":["webpack://tc-imba.github.io/./node_modules/gatsby-theme-academic/src/components/Gist/index.jsx"],"sourcesContent":["import React from 'react';\r\nimport {useSiteMetadata, useTheme} from '@/utils/hooks';\r\nimport Utils from '@/utils/pageUtils';\r\n\r\n\r\nconst Gist = (props) => {\r\n  const { id, file } = props;\r\n  const [themeMode, setThemeMode] = useTheme();\r\n  const siteMetadata = useSiteMetadata();\r\n\r\n  const uniqueId = file ? `gist-${id}-${file}` : `gist-${id}`;\r\n  const iframeNode = React.useRef(null);\r\n\r\n  const defineUrl = () => {\r\n    const fileArg = file ? `?file=${file}` : '';\r\n    return `https://gist.github.com/${id}.js${fileArg}`;\r\n  };\r\n\r\n  const updateIframeContent = () => {\r\n    const iframe = iframeNode.current;\r\n\r\n    let doc = iframe.document;\r\n    if (iframe.contentDocument) doc = iframe.contentDocument;\r\n    else if (iframe.contentWindow) doc = iframe.contentWindow.document;\r\n    const elementId = file ? `gist-${id}-${file}` : `gist-${id}`;\r\n\r\n    const gistLink = defineUrl();\r\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\r\n    const darkCssUrl = Utils.generateFullUrl(siteMetadata, 'github-gist-dark.css');\r\n    const darkCssScript = themeMode !== 'dark' ? '' : `\r\n      var styleNode = document.createElement(\"link\");\r\n      styleNode.setAttribute(\"rel\", \"stylesheet\");\r\n      styleNode.setAttribute(\"href\", \"${darkCssUrl}\");\r\n      document.body.appendChild(styleNode);\r\n    `;\r\n    const onloadScript = `<script>function init(){\r\n      parent.document.getElementById('${elementId}').style.height=document.body.scrollHeight + 'px';\r\n      ${darkCssScript}\r\n    }</script>`;\r\n    const headStyles = '<style>*{font-size:12px;} body{margin: 0;} </style>';\r\n    const resizeScript = 'onload=\"init()\"';\r\n    const iframeHtml = `<html><head><base target=\"_parent\">${headStyles}</head><body ${resizeScript}>${gistScript}${onloadScript}</body></html>`;\r\n\r\n    doc.open();\r\n    doc.writeln(iframeHtml);\r\n    doc.close();\r\n  };\r\n\r\n  React.useEffect(updateIframeContent, [themeMode]);\r\n\r\n  return (\r\n    <iframe\r\n      title={uniqueId}\r\n      ref={iframeNode}\r\n      width=\"100%\"\r\n      frameBorder={0}\r\n      id={uniqueId}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Gist;\r\n"],"names":["props","id","file","themeMode","setThemeMode","useTheme","siteMetadata","useSiteMetadata","uniqueId","iframeNode","React","updateIframeContent","iframe","current","doc","document","contentDocument","contentWindow","elementId","gistScript","darkCssUrl","Utils","generateFullUrl","iframeHtml","open","writeln","close","title","ref","width","frameBorder"],"sourceRoot":""}